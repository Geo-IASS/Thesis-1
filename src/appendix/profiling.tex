This appendix shows the results obtained from profiling code execution at
various stages throughout the project.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MATLAB
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{MATLAB}
\label{profiling:matlab}
This section details the results of profiling the original (\software{MATLAB})
code across numerous data sets. The following plots compare the self execution
time of functions composing the \command{commute_distance_anomaly} algorithm.

The data for the plots was obtained using the \software{MATLAB}
\command{profile} command. Descriptions of the data sets can be found in
\autoref{dataSets}.

Please note that, in the following plots, any functions with a self time less
than 3\% of the total execution time have been aggregated and are represented in
the plots by ``Other''.

\begin{figure}
    \input{plots/matlab/legend}
    \caption{Common legend for MATLAB profiling plots}
    \label{profiling:matlab:legend}
\end{figure}

\input{plots/matlab/all_datasets}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% C
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{C}
\label{profiling:c}
This section details the results of profiling the initial C implementation of the
\command{TopN_Outlier_Pruning_Block} function across numerous data sets. The
following plots compare the self execution time of sub-functions that are called
during the execution of the \command{TopN_Outlier_Pruning_Block} function.

The data for the plots was obtained using \software{The GNU Profiler}[gprof].
Descriptions of the data sets can be found in \autoref{dataSets}.

Please note that, in the following plots, any functions with a self time less
than 3\% of the total execution time have been aggregated and are represented in
the plots by ``Other''.

\begin{figure}
    \input{plots/c/legend}
    \caption{Common legend for C profiling plots}
    \label{profiling:c:legend}
\end{figure}

% TODO: Flags

\input{plots/c/all_datasets}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Block size
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Block size}
\label{profiling:blockSize}
This section details the results of profiling the initial C implementation of
the \command{TopN_Outlier_Pruning_Block} function across numerous data sets, and
with a varying block size. In addition, the execution time of the algorithm was
compared with a modified implementation which does not use blocking in any way.

The data for the plots was obtained using the \software{MATLAB}
\command{profile} command. Descriptions of the data sets can be found in
\autoref{dataSets}.

% TODO

Please note that the legend in \autoref{blockSizeProfiling:legend} is common to
all of the figures in this section (i.e.\
\autoref{blockSizeProfiling:totalExecutionTime},
\autoref{blockSizeProfiling:functionExecutionTime},
\autoref{blockSizeProfiling:distanceCalls},
\autoref{blockSizeProfiling:vectorsPruned},
\autoref{blockSizeProfiling:totalRunTimeComplexity} and
\autoref{blockSizeProfiling:functionRunTimeComplexity}).

\begin{figure}[H]
    \centering
    \input{plots/block_size/legend}
    \caption[Block size profiling legend]
        {The legend for all figures in \autoref{profiling:blockSize}}
    \label{blockSizeProfiling:legend}
\end{figure}

\begin{figure}[H]
    \centering
    \input{plots/block_size/total_execution_time}
    \caption{Total algorithm execution time with various block size
        implementations}
    \label{blockSizeProfiling:totalExecutionTime}
\end{figure}

\begin{figure}[H]
    \centering
    \input{plots/block_size/function_execution_time}
    \caption{Function execution time with various block size implementations}
    \label{blockSizeProfiling:functionExecutionTime}
\end{figure}

\begin{figure}[H]
    \centering
    \input{plots/block_size/distance_calls}
    \caption{Number of calls to the \command{distance} function with various
        block size implementations}
    \label{blockSizeProfiling:distanceCalls}
\end{figure}

\begin{figure}[H]
    \centering
    \input{plots/block_size/vectors_pruned}
    \caption{Number of vectors pruned with various block size implementations}
    \label{blockSizeProfiling:vectorsPruned}
\end{figure}

\begin{figure}[H]
    \centering
    \input{plots/block_size/total_run_time_complexity}
    \caption{Total run time complexity with various block size implementations}
    \label{blockSizeProfiling:totalRunTimeComplexity}
\end{figure}

\begin{figure}[H]
    \centering
    \input{plots/block_size/function_run_time_complexity}
    \caption
        [Function run time complexity with various block size implementations]
        {Function run time complexity (for the
            \command{TopN_Outlier_Pruning_Block} function) with various block
            size implementations}
    \label{blockSizeProfiling:functionRunTimeComplexity}
\end{figure}
